{
  "version": "3.39.1.427",
  "description": "Tencent Meeting | 腾讯会议",
  "homepage": "https://meeting.tencent.com/",
  "license": { "identifier": "Freemium" },

  "notes": [
    "Installation dir (绿色目录): $dir",
    "User data is persisted via Scoop 'persist'."
  ],

  "architecture": {
    "64bit": {
      "url": "https://updatecdn.meeting.qq.com/cos/9a27d0a6b9faf68786d997cea293a201/TencentMeeting_0300000000_3.39.1.427_x86_64.publish.exe#/dl.7z",
      "hash": "05b8c52eacc6109ebfec5cc7931028596478dfc400dc385d76aea879f07cc859"
    }
  },

  "extract_dir": "WeMeet",

  "shortcuts": [
    [ "WeMeetApp.exe", "腾讯会议" ]
  ],

  "persist": [
    "data",
    "WeMeetStorage"
  ],

  /* ---------- 自动检查更新 ---------- */
  "checkver": {
    "script": [
      "$api = 'https://api.github.com/repos/microsoft/winget-pkgs/contents/manifests/t/Tencent/TencentMeeting'",
      "$ver = (Invoke-RestMethod $api | Where-Object name -notmatch '^\\.' | " +
             "Sort-Object { [version] $_.name } -Descending | Select-Object -First 1).name",
      "$yamlUrl = \"https://raw.githubusercontent.com/microsoft/winget-pkgs/master/manifests/t/Tencent/TencentMeeting/$ver/Tencent.TencentMeeting.installer.yaml\"",
      "$yaml = Invoke-RestMethod $yamlUrl",
      "$path_x64 = ([regex]'InstallerUrl:\\s*https://updatecdn\\.meeting\\.qq\\.com/(.+_x86_64.+)').Match($yaml).Groups[1].Value",
      "Write-Output \"version:$ver;path_x64:$path_x64\""
    ],
    "regex": "version:(?<version>[^;]+);path_x64:(?<path_x64>.+)"
  },

  "autoupdate": {
    "architecture": {
      "64bit": {
        "url": "https://updatecdn.meeting.qq.com/$matchPath_x64#/dl.7z"
      }
    },
    "hash": {
      "url": "https://raw.githubusercontent.com/microsoft/winget-pkgs/master/manifests/t/Tencent/TencentMeeting/$version/Tencent.TencentMeeting.installer.yaml",
      "regex": "- Architecture:\\s*x64[\\s\\S]+?InstallerSha256:\\s*$sha256"
    }
  }
}
